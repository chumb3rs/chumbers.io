---
import { type CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';
import ArrowUp from '@/components/icons/ArrowUp';
import { ContentTypeEnum } from '@/data/utils';
import { capitalizeWord } from '@/utils';

type Props = {
    entities: CollectionEntry<'series'>[];
    contentType: ContentTypeEnum;
};

const { entities, contentType } = Astro.props;
---

<div class='mt-5 mb-8 flex flex-col justify-center w-full gap-4'>
    {
        entities.map((entity) => {
            const {
                data: { title, description, heroImage },
                slug
            } = entity;

            return (
                <a
                    href={`/series/${slug}/1`}
                    class='flex flex-col md:flex-row items-stretch gap-6 w-full py-4 border-y dark:border-gray-200 light:border-gray-600 hover:bg-primary/30 hover:border-primary transition-all duration-500'
                    aria-label={`Read more about ${title}`}
                >
                    {heroImage && (
                        <div class='hidden md:block w-[400px] h-[200px] overflow-hidden flex-shrink-0 rounded-md'>
                            <Image
                                src={heroImage}
                                width={400}
                                height={200}
                                format='webp'
                                loading='eager'
                                alt={`image of ${title}`}
                                class='w-full h-full object-cover brightness-75 saturate-75'
                            />
                        </div>
                    )}

                    <div class='flex flex-col justify-between text-left w-full md:w-2/3'>
                        <div>
                            <h3 class='text-xl font-semibold mb-2'>{title}</h3>
                            <p class='text-gray-600 dark:text-gray-400 leading-relaxed'>
                                {description}
                            </p>
                        </div>

                        <footer class='flex justify-start items-center mt-4'>
                            <span class='flex justify-center items-center dark:text-white rounded-full hover:translate-x-1 transition-transform duration-150 ease-in-out font-semibold gap-1 group'>
                                {`Read ${capitalizeWord(contentType)}`}
                                <span class='mt-[1px] group-hover:rotate-45 transition-transform duration-200 ease-in-out'>
                                    <ArrowUp width='18' height='18' />
                                </span>
                            </span>
                        </footer>
                    </div>
                </a>
            );
        })
    }
</div>
