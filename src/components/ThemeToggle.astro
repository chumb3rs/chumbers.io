---

---

<label class="relative inline-flex items-center cursor-pointer">
    <!-- Hidden Checkbox Peer -->
    <input id="theme-toggle" type="checkbox" class="sr-only peer" />

    <!-- Switch Track -->
    <div
        class="w-14 h-8 bg-gray-300 dark:bg-gray-600 rounded-full peer-checked:bg-blue-500 transition-colors duration-300"
    >
    </div>

    <!-- Switch Thumb -->
    <div
        class="absolute left-0.5 top-0.5 w-7 h-7 bg-white rounded-full shadow-md transform transition-transform duration-300 peer-checked:translate-x-6 flex items-center justify-center"
    >
        <!-- We use JavaScript or :has() to change this -->
        <span id="switch-icon" class="text-yellow-400 dark:text-white">‚òÄÔ∏è</span>
    </div>
</label>

<script>
    document.addEventListener("astro:page-load", () => {
        const theme = (() => {
            if (
                typeof localStorage !== "undefined" &&
                localStorage.getItem("theme")
            ) {
                return localStorage.getItem("theme") || "light";
            }
            if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                return "dark";
            }
            return "light";
        })();

        if (theme === "light") {
            document.documentElement.classList.remove("dark");
        } else {
            document.documentElement.classList.add("dark");
        }

        window.localStorage.setItem("theme", theme);

        const handleToggleClick = () => {
            const element = document.documentElement;
            element.classList.toggle("dark");

            const isDark = element.classList.contains("dark");
            localStorage.setItem("theme", isDark ? "dark" : "light");

            const icon = document.getElementById("switch-icon");
            if (icon) {
                icon.textContent = isDark ? "üåô" : "‚òÄÔ∏è";
            }
        };

        document
            .getElementById("theme-toggle")
            ?.addEventListener("click", handleToggleClick);
    });
</script>

<script>
    document.addEventListener("astro:after-swap", () => {
        if (localStorage.theme === "dark") {
            document.documentElement.classList.add("dark");
        }
    });
</script>
