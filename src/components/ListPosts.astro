---
import type { CollectionEntry } from 'astro:content';
import PostCard from '@/components/PostCard';
import { cn } from '@/utils';

type Props = {
    posts: CollectionEntry<'posts'>[];
    FirstBig?: boolean;
};

const { posts, FirstBig = false } = Astro.props;
const hasPosts = posts.length > 0;
---

{
    hasPosts ? (
        <section
            class={cn(
                `grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 mt-3`,
                FirstBig && `md:[&>*:first-child]:col-span-2`
            )}
        >
            {posts.map(async (post) => {
                const { remarkPluginFrontmatter } = await post.render();

                return (
                    <PostCard
                        id={post.id}
                        data={post.data}
                        slug={post.slug}
                        readTime={remarkPluginFrontmatter.minutesRead}
                    />
                );
            })}
        </section>
    ) : (
        <div class='w-full text-center flex flex-col items-center justify-center py-16 opacity-80'>
            <svg
                xmlns='http://www.w3.org/2000/svg'
                class='w-16 h-16 mb-4 text-gray-400'
                fill='none'
                viewBox='0 0 24 24'
                stroke='currentColor'
                stroke-width='1.5'
            >
                <path
                    stroke-linecap='round'
                    stroke-linejoin='round'
                    d='M9 13h6m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h6l6 6v10a2 2 0 01-2 2z'
                />
            </svg>
            <p class='text-lg font-medium text-gray-500'>
                Move along, nothing to see here...yet.
            </p>
        </div>
    )
}
