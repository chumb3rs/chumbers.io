---
import ContentTypeLayout from '@/layouts/ContentTypeLayout';
import ListPosts from '@/components/ListPosts';
import ListTags from '@/components/ListTags.astro';
import { getTags, getPostByTag } from '@/utils';

export async function getStaticPaths() {
    const tags = await getTags();

    return tags.map((tag) => ({
        params: { tag },
        props: { tag }
    }));
}

const { tag } = Astro.props;

const tags = await getTags();
const posts = await getPostByTag(tag);
---

<ContentTypeLayout contentType='tags' title={tag}>
    <ListTags tags={tags} activeTag={tag} />
    <ListPosts posts={posts} />
</ContentTypeLayout>
