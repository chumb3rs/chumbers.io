---
import BaseLayout from '@/layouts/BaseLayout';
import ArchiveTreeView from '@/components/ArchiveTreeView';
import { getPosts, createArchiveData } from '@/utils';

const allPosts = await getPosts();
const archiveData = createArchiveData(allPosts);
---

<BaseLayout title='Archive - Tree View'>
    <section class='flex flex-col items-center'>
        <div class='w-full max-w-4xl'>
            <!-- Header -->
            <div class='text-center mb-8'>
                <h1
                    class='text-4xl font-bold text-center underline--magical inline-block mx-auto font-mono mb-4'
                >
                    ./ARCHIVE
                </h1>
                <p class='text-gray-600 dark:text-gray-300 text-lg'>
                    Browse {archiveData.totalPosts} posts in tree view
                </p>
                <div class='mt-4 flex justify-center gap-4'>
                    <a
                        href='/archive'
                        class='text-sm text-primary hover:text-primary/80 underline transition-colors'
                    >
                        Switch to Card View
                    </a>
                </div>
            </div>

            <!-- Tree View Component -->
            <ArchiveTreeView archiveData={archiveData} />
        </div>
    </section>
</BaseLayout>
